var e={d:(t,i)=>{for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(e,t,i){return(t=s(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}e.d(t,{A:()=>u});const u=function(){return e=function e(t,i,r,a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalConfig=t,this.serviceName=i,this.state=r,this.mode=a,this.util=n,this.is_new_input=!0,this._debouncedFieldIgnoreList=this.debounce(this._fieldIgnoreList.bind(this),200)},t=[{key:"onCreate",value:function(){}},{key:"debounce",value:function(e,t){var i;return function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];clearTimeout(i),i=setTimeout((function(){e.apply(void 0,a)}),t)}}},{key:"onChange",value:function(e,t,i){var r=this;this.util.setState((function(t){var n=a({},t.data);if("jira_cloud_issues_input"===r.serviceName){if(r._debouncedFieldIgnoreList(i),"start_date"===e&&"edit"===r.mode){var o=r.state.data.start_date.value;r._startDateChange(o,i)}}else"jira_cloud_input"===r.serviceName&&"from"===e&&"edit"===r.mode&&(o=r.state.data.from.value,r._startDateChange(o,i));return{data:n}}))}},{key:"onEditLoad",value:function(){var e=this;this.util.setState((function(t){var i=a({},t.data);return i.use_existing_checkpoint.display=!0,i.use_existing_checkpoint.value="yes",i.use_existing_checkpoint.markdownMessage={text:"A Checkpoint for this input already exists. Selecting `No` will reset the data collection.",color:"red",markdownType:"text"},"jira_cloud_input"===e.serviceName?i.from.disabled=!0:"jira_cloud_issues_input"===e.serviceName&&(i.start_date.disabled=!0),{data:i}}))}},{key:"onRender",value:function(){"jira_cloud_issues_input"===this.serviceName&&this._fieldIgnoreList(this.state)}},{key:"_startDateChange",value:function(e,t){var i=this;if("jira_cloud_input"===this.serviceName)var r=t.data.from.value;else"jira_cloud_issues_input"===this.serviceName&&(r=t.data.start_date.value);void 0===e&&""===e&&null===e||e===r||this.util.setState((function(e){var t=a({},e.data),r={text:"Changing this parameter may result in gaps or duplication in data collection",color:"red",markdownType:"text"};return"jira_cloud_input"===i.serviceName?t.from.markdownMessage=r:"jira_cloud_issues_input"===i.serviceName&&(t.start_date.markdownMessage=r),{data:t}}))}},{key:"_fieldIgnoreList",value:function(e){var t=e.data.include.value,i=e.data.exclude.value;!this.isEmpty(t)&&this.isEmpty(i)?this.util.setState((function(e){var t=a({},e.data);return t.exclude.disabled=!0,t.include.disabled=!1,{data:t}})):!this.isEmpty(i)&&this.isEmpty(t)?this.util.setState((function(e){var t=a({},e.data);return t.exclude.disabled=!1,t.include.disabled=!0,{data:t}})):this.isEmpty(t)&&this.isEmpty(i)&&this.util.setState((function(e){var t=a({},e.data);return t.exclude.disabled=!1,t.include.disabled=!1,{data:t}}))}},{key:"isEmpty",value:function(e){return null===e||0===e.trim().length}}],t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var c=t.A;export{c as default};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXRfaG9vay5qcyIsIm1hcHBpbmdzIjoiQUFDQSxJQUFJQSxFQUFzQixDQ0ExQkEsRUFBd0IsQ0FBQ0MsRUFBU0MsS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYRixFQUFvQkksRUFBRUYsRUFBWUMsS0FBU0gsRUFBb0JJLEVBQUVILEVBQVNFLElBQzVFRSxPQUFPQyxlQUFlTCxFQUFTRSxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsSUFFMUUsRUNOREgsRUFBd0IsQ0FBQ1MsRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsSSxvM0NDd0xsRixRQWpMZSxXQTZCYixPLEVBYkEsU0FBQUksRUFBWUMsRUFBY0MsRUFBYUMsRUFBT0MsRUFBTUMsSSw0RkFBTUMsQ0FBQSxLQUFBTixHQUN4RE8sS0FBS04sYUFBZUEsRUFDcEJNLEtBQUtMLFlBQWNBLEVBQ25CSyxLQUFLSixNQUFRQSxFQUNiSSxLQUFLSCxLQUFPQSxFQUNaRyxLQUFLRixLQUFPQSxFQUNaRSxLQUFLQyxjQUFlLEVBQ3BCRCxLQUFLRSwwQkFBNEJGLEtBQUtHLFNBQ3BDSCxLQUFLSSxpQkFBaUJDLEtBQUtMLE1BQzNCLElBRUosRSxFQUVBLEVBQUFsQixJQUFBLFdBQUF3QixNQUdBLFdBQWEsR0FBQyxDQUFBeEIsSUFBQSxXQUFBd0IsTUFFZCxTQUFTQyxFQUFNQyxHQUNiLElBQUlDLEVBR0osT0FBTyxXQUFtQyxRQUFBQyxFQUFBQyxVQUFBQyxPQUFOQyxFQUFJLElBQUFDLE1BQUFKLEdBQUFLLEVBQUEsRUFBQUEsRUFBQUwsRUFBQUssSUFBSkYsRUFBSUUsR0FBQUosVUFBQUksR0FPdENDLGFBQWFQLEdBSWJBLEVBQVVRLFlBQVcsV0FDbkJWLEVBQUlXLFdBQUMsRUFBR0wsRUFDVixHQUFHTCxFQUNMLENBQ0YsR0FBQyxDQUFBMUIsSUFBQSxXQUFBd0IsTUFFRCxTQUFTYSxFQUFPYixFQUFPYyxHQUFVLElBQUFDLEVBQUEsS0FDL0JyQixLQUFLRixLQUFLd0IsVUFBUyxTQUFDQyxHQUNsQixJQUFNQyxFQUFJQyxFQUFBLEdBQ0xGLEVBQVVDLE1BRWYsR0FBeUIsNEJBQXJCSCxFQUFLMUIsYUFFUCxHQURBMEIsRUFBS25CLDBCQUEwQmtCLEdBQ2pCLGVBQVZELEdBQXdDLFNBQWRFLEVBQUt4QixLQUFpQixDQUNsRCxJQUFJNkIsRUFBZUwsRUFBS3pCLE1BQU00QixLQUFLRyxXQUFXckIsTUFDOUNlLEVBQUtPLGlCQUFpQkYsRUFBY04sRUFDdEMsTUFDOEIscUJBQXJCQyxFQUFLMUIsYUFDQSxTQUFWd0IsR0FBa0MsU0FBZEUsRUFBS3hCLE9BQ3ZCNkIsRUFBZUwsRUFBS3pCLE1BQU00QixLQUFLSyxLQUFLdkIsTUFDeENlLEVBQUtPLGlCQUFpQkYsRUFBY04sSUFHeEMsTUFBTyxDQUNMSSxLQUFBQSxFQUVKLEdBQ0YsR0FBQyxDQUFBMUMsSUFBQSxhQUFBd0IsTUFFRCxXQUFhLElBQUF3QixFQUFBLEtBQ1g5QixLQUFLRixLQUFLd0IsVUFBUyxTQUFDQyxHQUNsQixJQUFNQyxFQUFJQyxFQUFBLEdBQ0xGLEVBQVVDLE1BZWYsT0FiQUEsRUFBS08sd0JBQXdCQyxTQUFVLEVBQ3ZDUixFQUFLTyx3QkFBd0J6QixNQUFRLE1BQ3JDa0IsRUFBS08sd0JBQXdCRSxnQkFBa0IsQ0FDN0NDLEtBQU0sNkZBQ05DLE1BQU8sTUFDUEMsYUFBYyxRQUdTLHFCQUFyQk4sRUFBS25DLFlBQ1A2QixFQUFLSyxLQUFLUSxVQUFXLEVBQ1MsNEJBQXJCUCxFQUFLbkMsY0FDZDZCLEVBQUtHLFdBQVdVLFVBQVcsR0FFdEIsQ0FDTGIsS0FBQUEsRUFFSixHQUNGLEdBRUEsQ0FBQTFDLElBQUEsV0FBQXdCLE1BR0EsV0FFMkIsNEJBQXJCTixLQUFLTCxhQUNQSyxLQUFLSSxpQkFBaUJKLEtBQUtKLE1BRS9CLEdBQUMsQ0FBQWQsSUFBQSxtQkFBQXdCLE1BRUQsU0FBaUJvQixFQUFjTixHQUFVLElBQUFrQixFQUFBLEtBQ3ZDLEdBQXlCLHFCQUFyQnRDLEtBQUtMLFlBQ1AsSUFBSTRDLEVBQW1CbkIsRUFBU0ksS0FBS0ssS0FBS3ZCLFVBQ1osNEJBQXJCTixLQUFLTCxjQUNWNEMsRUFBbUJuQixFQUFTSSxLQUFLRyxXQUFXckIsWUFHOUJrQyxJQUFqQmQsR0FDa0IsS0FBakJBLEdBQ2lCLE9BQWpCQSxHQUNGQSxJQUFpQmEsR0FFakJ2QyxLQUFLRixLQUFLd0IsVUFBUyxTQUFBQyxHQUNqQixJQUFJQyxFQUFJQyxFQUFBLEdBQVFGLEVBQVVDLE1BQ3RCaUIsRUFBYSxDQUNmUCxLQUFNLCtFQUNOQyxNQUFPLE1BQ1BDLGFBQWMsUUFPaEIsTUFMeUIscUJBQXJCRSxFQUFLM0MsWUFDUDZCLEVBQUtLLEtBQUtJLGdCQUFrQlEsRUFDRSw0QkFBckJILEVBQUszQyxjQUNkNkIsRUFBS0csV0FBV00sZ0JBQWtCUSxHQUU3QixDQUFFakIsS0FBQUEsRUFDWCxHQUVKLEdBQUMsQ0FBQTFDLElBQUEsbUJBQUF3QixNQUVELFNBQWlCYyxHQUNmLElBQU1zQixFQUFVdEIsRUFBU0ksS0FBS2tCLFFBQVFwQyxNQUNoQ3FDLEVBQVV2QixFQUFTSSxLQUFLbUIsUUFBUXJDLE9BRWpDTixLQUFLNEMsUUFBUUYsSUFBWTFDLEtBQUs0QyxRQUFRRCxHQUN6QzNDLEtBQUtGLEtBQUt3QixVQUFTLFNBQUNDLEdBQ2xCLElBQU1DLEVBQUlDLEVBQUEsR0FBUUYsRUFBVUMsTUFHNUIsT0FGQUEsRUFBS21CLFFBQVFOLFVBQVcsRUFDeEJiLEVBQUtrQixRQUFRTCxVQUFXLEVBQ2pCLENBQUViLEtBQUFBLEVBQ1gsS0FDVXhCLEtBQUs0QyxRQUFRRCxJQUFZM0MsS0FBSzRDLFFBQVFGLEdBQ2hEMUMsS0FBS0YsS0FBS3dCLFVBQVMsU0FBQ0MsR0FDbEIsSUFBTUMsRUFBSUMsRUFBQSxHQUFRRixFQUFVQyxNQUc1QixPQUZBQSxFQUFLbUIsUUFBUU4sVUFBVyxFQUN4QmIsRUFBS2tCLFFBQVFMLFVBQVcsRUFDakIsQ0FBRWIsS0FBQUEsRUFDWCxJQUNTeEIsS0FBSzRDLFFBQVFGLElBQVkxQyxLQUFLNEMsUUFBUUQsSUFDL0MzQyxLQUFLRixLQUFLd0IsVUFBUyxTQUFDQyxHQUNsQixJQUFNQyxFQUFJQyxFQUFBLEdBQVFGLEVBQVVDLE1BRzVCLE9BRkFBLEVBQUttQixRQUFRTixVQUFXLEVBQ3hCYixFQUFLa0IsUUFBUUwsVUFBVyxFQUNqQixDQUFFYixLQUFBQSxFQUNYLEdBRUosR0FBQyxDQUFBMUMsSUFBQSxVQUFBd0IsTUFFRCxTQUFRQSxHQUVOLE9BQWlCLE9BQVZBLEdBQTBDLElBQXhCQSxFQUFNdUMsT0FBT2pDLE1BQ3hDLEksZ0ZBQUMsQ0E1S1ksRyIsInNvdXJjZXMiOlsid2VicGFjazovL1NwbHVua19UQV9KaXJhX0Nsb3VkL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL1NwbHVua19UQV9KaXJhX0Nsb3VkL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9TcGx1bmtfVEFfSmlyYV9DbG91ZC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL1NwbHVua19UQV9KaXJhX0Nsb3VkLy4vdWNjX3VpX2V4dGVuc2lvbnMvaW5wdXRfaG9vay5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8qKlxuICpcbiAqIFNQRFgtRmlsZUNvcHlyaWdodFRleHQ6IDIwMjQgU3BsdW5rLCBJbmMuXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTGljZW5zZVJlZi1TcGx1bmstOC0yMDIxXG4gKlxuICovXG5cbmNsYXNzIElucHV0SG9vayB7XG4gIC8qKlxuICAgICAgKiBGb3JtIGhvb2tcbiAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAqIEBwYXJhbSB7T2JqZWN0fSBnbG9iYWxDb25maWcgLSBHbG9iYWwgY29uZmlndXJhdGlvbi5cbiAgICAgICogQHBhcmFtIHtvYmplY3R9IHNlcnZpY2VOYW1lIC0gU2VydmljZSBuYW1lXG4gICAgICAqIEBwYXJhbSB7b2JqZWN0fSBzdGF0ZSAtIEluaXRpYWwgc3RhdGUgb2YgdGhlIGZvcm1cbiAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGUgLSBlZGl0LGNyZWF0ZSBvciBjbG9uZVxuICAgICAgKiBAcGFyYW0ge29iamVjdH0gdXRpbCAtIE9iamVjdCBjb250YWluaW5nIHV0aWxpdHkgbWV0aG9kc1xuICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgIHNldFN0YXRlLFxuICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3JNc2csXG4gICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvckZpZWxkTXNnLFxuICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJBbGxFcnJvck1zZ1xuICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICovXG4gIGNvbnN0cnVjdG9yKGdsb2JhbENvbmZpZywgc2VydmljZU5hbWUsIHN0YXRlLCBtb2RlLCB1dGlsKSB7XG4gICAgdGhpcy5nbG9iYWxDb25maWcgPSBnbG9iYWxDb25maWdcbiAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWVcbiAgICB0aGlzLnN0YXRlID0gc3RhdGVcbiAgICB0aGlzLm1vZGUgPSBtb2RlXG4gICAgdGhpcy51dGlsID0gdXRpbFxuICAgIHRoaXMuaXNfbmV3X2lucHV0ID0gdHJ1ZVxuICAgIHRoaXMuX2RlYm91bmNlZEZpZWxkSWdub3JlTGlzdCA9IHRoaXMuZGVib3VuY2UoXG4gICAgICB0aGlzLl9maWVsZElnbm9yZUxpc3QuYmluZCh0aGlzKSxcbiAgICAgIDIwMFxuICAgIClcbiAgfVxuXG4gIC8qXG4gICAgICAgUHV0IGxvZ2ljIGhlcmUgdG8gZXhlY3V0ZSBqYXZhc2NyaXB0IG9uIFVJIGNyZWF0aW9uLlxuICAgICAqL1xuICBvbkNyZWF0ZSgpIHsgfVxuXG4gIGRlYm91bmNlKGZ1bmMsIHdhaXQpIHtcbiAgICBsZXQgdGltZW91dFxuICAgIC8vIFRoaXMgaXMgdGhlIGZ1bmN0aW9uIHRoYXQgaXMgcmV0dXJuZWQgYW5kIHdpbGwgYmUgZXhlY3V0ZWQgbWFueSB0aW1lc1xuICAgIC8vIFdlIHNwcmVhZCAoLi4uYXJncykgdG8gY2FwdHVyZSBhbnkgbnVtYmVyIG9mIHBhcmFtZXRlcnMgd2Ugd2FudCB0byBwYXNzXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGV4ZWN1dGVkRnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgLy8gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIGFmdGVyXG4gICAgICAvLyB0aGUgZGVib3VuY2UgdGltZSBoYXMgZWxhcHNlZFxuICAgICAgLy8gVGhpcyB3aWxsIHJlc2V0IHRoZSB3YWl0aW5nIGV2ZXJ5IGZ1bmN0aW9uIGV4ZWN1dGlvbi5cbiAgICAgIC8vIFRoaXMgaXMgdGhlIHN0ZXAgdGhhdCBwcmV2ZW50cyB0aGUgZnVuY3Rpb24gZnJvbVxuICAgICAgLy8gYmVpbmcgZXhlY3V0ZWQgYmVjYXVzZSBpdCB3aWxsIG5ldmVyIHJlYWNoIHRoZVxuICAgICAgLy8gaW5zaWRlIG9mIHRoZSBwcmV2aW91cyBzZXRUaW1lb3V0XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dClcblxuICAgICAgLy8gUmVzdGFydCB0aGUgZGVib3VuY2Ugd2FpdGluZyBwZXJpb2QuXG4gICAgICAvLyBzZXRUaW1lb3V0IHJldHVybnMgYSB0cnV0aHkgdmFsdWVcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZnVuYyguLi5hcmdzKVxuICAgICAgfSwgd2FpdClcbiAgICB9XG4gIH1cblxuICBvbkNoYW5nZShmaWVsZCwgdmFsdWUsIGRhdGFEaWN0KSB7XG4gICAgdGhpcy51dGlsLnNldFN0YXRlKChwcmV2U3RhdGUpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIC4uLnByZXZTdGF0ZS5kYXRhXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zZXJ2aWNlTmFtZSA9PT0gXCJqaXJhX2Nsb3VkX2lzc3Vlc19pbnB1dFwiKSB7XG4gICAgICAgIHRoaXMuX2RlYm91bmNlZEZpZWxkSWdub3JlTGlzdChkYXRhRGljdClcbiAgICAgICAgaWYgKGZpZWxkID09PSAnc3RhcnRfZGF0ZScgJiYgdGhpcy5tb2RlID09PSAnZWRpdCcpIHtcbiAgICAgICAgICB2YXIgb2xkU3RhcnREYXRlID0gdGhpcy5zdGF0ZS5kYXRhLnN0YXJ0X2RhdGUudmFsdWVcbiAgICAgICAgICB0aGlzLl9zdGFydERhdGVDaGFuZ2Uob2xkU3RhcnREYXRlLCBkYXRhRGljdClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLnNlcnZpY2VOYW1lID09PSBcImppcmFfY2xvdWRfaW5wdXRcIikge1xuICAgICAgICBpZiAoZmllbGQgPT09ICdmcm9tJyAmJiB0aGlzLm1vZGUgPT09ICdlZGl0Jykge1xuICAgICAgICAgIHZhciBvbGRTdGFydERhdGUgPSB0aGlzLnN0YXRlLmRhdGEuZnJvbS52YWx1ZVxuICAgICAgICAgIHRoaXMuX3N0YXJ0RGF0ZUNoYW5nZShvbGRTdGFydERhdGUsIGRhdGFEaWN0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIG9uRWRpdExvYWQoKSB7XG4gICAgdGhpcy51dGlsLnNldFN0YXRlKChwcmV2U3RhdGUpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIC4uLnByZXZTdGF0ZS5kYXRhXG4gICAgICB9XG4gICAgICBkYXRhLnVzZV9leGlzdGluZ19jaGVja3BvaW50LmRpc3BsYXkgPSB0cnVlXG4gICAgICBkYXRhLnVzZV9leGlzdGluZ19jaGVja3BvaW50LnZhbHVlID0gJ3llcydcbiAgICAgIGRhdGEudXNlX2V4aXN0aW5nX2NoZWNrcG9pbnQubWFya2Rvd25NZXNzYWdlID0ge1xuICAgICAgICB0ZXh0OiAnQSBDaGVja3BvaW50IGZvciB0aGlzIGlucHV0IGFscmVhZHkgZXhpc3RzLiBTZWxlY3RpbmcgYE5vYCB3aWxsIHJlc2V0IHRoZSBkYXRhIGNvbGxlY3Rpb24uJyxcbiAgICAgICAgY29sb3I6ICdyZWQnLFxuICAgICAgICBtYXJrZG93blR5cGU6ICd0ZXh0J1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zZXJ2aWNlTmFtZSA9PT0gXCJqaXJhX2Nsb3VkX2lucHV0XCIpIHtcbiAgICAgICAgZGF0YS5mcm9tLmRpc2FibGVkID0gdHJ1ZVxuICAgICAgfSBlbHNlIGlmICh0aGlzLnNlcnZpY2VOYW1lID09PSBcImppcmFfY2xvdWRfaXNzdWVzX2lucHV0XCIpIHtcbiAgICAgICAgZGF0YS5zdGFydF9kYXRlLmRpc2FibGVkID0gdHJ1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvKlxuICAgICAgIFB1dCBsb2dpYyBoZXJlIHRvIGV4ZWN1dGUgamF2YXNjcmlwdCB3aGVuIFVJIGdldHMgcmVuZGVyZWQuXG4gICAgICovXG4gIG9uUmVuZGVyKCkge1xuICAgIC8qIERpc2FibGUgdGhlIGZpZWxkcyBhcyBhcHBsaWNhYmxlIHdoZW4gaW5wdXQgaXMgZWRpdGVkLyBjbG9uZWQgKi9cbiAgICBpZiAodGhpcy5zZXJ2aWNlTmFtZSA9PT0gXCJqaXJhX2Nsb3VkX2lzc3Vlc19pbnB1dFwiKSB7XG4gICAgICB0aGlzLl9maWVsZElnbm9yZUxpc3QodGhpcy5zdGF0ZSlcbiAgICB9XG4gIH1cblxuICBfc3RhcnREYXRlQ2hhbmdlKG9sZFN0YXJ0RGF0ZSwgZGF0YURpY3QpIHtcbiAgICBpZiAodGhpcy5zZXJ2aWNlTmFtZSA9PT0gXCJqaXJhX2Nsb3VkX2lucHV0XCIpIHtcbiAgICAgIHZhciBjdXJyZW50U3RhcnREYXRlID0gZGF0YURpY3QuZGF0YS5mcm9tLnZhbHVlXG4gICAgfSBlbHNlIGlmICh0aGlzLnNlcnZpY2VOYW1lID09PSBcImppcmFfY2xvdWRfaXNzdWVzX2lucHV0XCIpIHtcbiAgICAgIHZhciBjdXJyZW50U3RhcnREYXRlID0gZGF0YURpY3QuZGF0YS5zdGFydF9kYXRlLnZhbHVlXG4gICAgfVxuICAgIGlmIChcbiAgICAgIChvbGRTdGFydERhdGUgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICBvbGRTdGFydERhdGUgIT09ICcnIHx8XG4gICAgICAgIG9sZFN0YXJ0RGF0ZSAhPT0gbnVsbCkgJiZcbiAgICAgIG9sZFN0YXJ0RGF0ZSAhPT0gY3VycmVudFN0YXJ0RGF0ZVxuICAgICkge1xuICAgICAgdGhpcy51dGlsLnNldFN0YXRlKHByZXZTdGF0ZSA9PiB7XG4gICAgICAgIGxldCBkYXRhID0geyAuLi5wcmV2U3RhdGUuZGF0YSB9XG4gICAgICAgIHZhciBta2RNZXNzYWdlID0ge1xuICAgICAgICAgIHRleHQ6ICdDaGFuZ2luZyB0aGlzIHBhcmFtZXRlciBtYXkgcmVzdWx0IGluIGdhcHMgb3IgZHVwbGljYXRpb24gaW4gZGF0YSBjb2xsZWN0aW9uJyxcbiAgICAgICAgICBjb2xvcjogJ3JlZCcsXG4gICAgICAgICAgbWFya2Rvd25UeXBlOiAndGV4dCdcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZXJ2aWNlTmFtZSA9PT0gXCJqaXJhX2Nsb3VkX2lucHV0XCIpIHtcbiAgICAgICAgICBkYXRhLmZyb20ubWFya2Rvd25NZXNzYWdlID0gbWtkTWVzc2FnZVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VydmljZU5hbWUgPT09IFwiamlyYV9jbG91ZF9pc3N1ZXNfaW5wdXRcIikge1xuICAgICAgICAgIGRhdGEuc3RhcnRfZGF0ZS5tYXJrZG93bk1lc3NhZ2UgPSBta2RNZXNzYWdlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZGF0YSB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIF9maWVsZElnbm9yZUxpc3QoZGF0YURpY3QpIHtcbiAgICBjb25zdCBpbmNsdWRlID0gZGF0YURpY3QuZGF0YS5pbmNsdWRlLnZhbHVlXG4gICAgY29uc3QgZXhjbHVkZSA9IGRhdGFEaWN0LmRhdGEuZXhjbHVkZS52YWx1ZVxuXG4gICAgaWYgKCF0aGlzLmlzRW1wdHkoaW5jbHVkZSkgJiYgdGhpcy5pc0VtcHR5KGV4Y2x1ZGUpKSB7XG4gICAgICB0aGlzLnV0aWwuc2V0U3RhdGUoKHByZXZTdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0geyAuLi5wcmV2U3RhdGUuZGF0YSB9XG4gICAgICAgIGRhdGEuZXhjbHVkZS5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgZGF0YS5pbmNsdWRlLmRpc2FibGVkID0gZmFsc2VcbiAgICAgICAgcmV0dXJuIHsgZGF0YSB9XG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNFbXB0eShleGNsdWRlKSAmJiB0aGlzLmlzRW1wdHkoaW5jbHVkZSkpIHtcbiAgICAgIHRoaXMudXRpbC5zZXRTdGF0ZSgocHJldlN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7IC4uLnByZXZTdGF0ZS5kYXRhIH1cbiAgICAgICAgZGF0YS5leGNsdWRlLmRpc2FibGVkID0gZmFsc2VcbiAgICAgICAgZGF0YS5pbmNsdWRlLmRpc2FibGVkID0gdHJ1ZVxuICAgICAgICByZXR1cm4geyBkYXRhIH1cbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzRW1wdHkoaW5jbHVkZSkgJiYgdGhpcy5pc0VtcHR5KGV4Y2x1ZGUpKSB7XG4gICAgICB0aGlzLnV0aWwuc2V0U3RhdGUoKHByZXZTdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0geyAuLi5wcmV2U3RhdGUuZGF0YSB9XG4gICAgICAgIGRhdGEuZXhjbHVkZS5kaXNhYmxlZCA9IGZhbHNlXG4gICAgICAgIGRhdGEuaW5jbHVkZS5kaXNhYmxlZCA9IGZhbHNlXG4gICAgICAgIHJldHVybiB7IGRhdGEgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBpc0VtcHR5KHZhbHVlKSB7XG4gICAgLyogUmV0dXJucyB0cnVlIGlmIHZhbHVlIGlzIG5vdCBzZXQgZWxzZSBmYWxzZSAqL1xuICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZS50cmltKCkubGVuZ3RoID09PSAwXG4gIH1cblxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IElucHV0SG9va1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiSW5wdXRIb29rIiwiZ2xvYmFsQ29uZmlnIiwic2VydmljZU5hbWUiLCJzdGF0ZSIsIm1vZGUiLCJ1dGlsIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImlzX25ld19pbnB1dCIsIl9kZWJvdW5jZWRGaWVsZElnbm9yZUxpc3QiLCJkZWJvdW5jZSIsIl9maWVsZElnbm9yZUxpc3QiLCJiaW5kIiwidmFsdWUiLCJmdW5jIiwid2FpdCIsInRpbWVvdXQiLCJfbGVuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJncyIsIkFycmF5IiwiX2tleSIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJhcHBseSIsImZpZWxkIiwiZGF0YURpY3QiLCJfdGhpcyIsInNldFN0YXRlIiwicHJldlN0YXRlIiwiZGF0YSIsIl9vYmplY3RTcHJlYWQiLCJvbGRTdGFydERhdGUiLCJzdGFydF9kYXRlIiwiX3N0YXJ0RGF0ZUNoYW5nZSIsImZyb20iLCJfdGhpczIiLCJ1c2VfZXhpc3RpbmdfY2hlY2twb2ludCIsImRpc3BsYXkiLCJtYXJrZG93bk1lc3NhZ2UiLCJ0ZXh0IiwiY29sb3IiLCJtYXJrZG93blR5cGUiLCJkaXNhYmxlZCIsIl90aGlzMyIsImN1cnJlbnRTdGFydERhdGUiLCJ1bmRlZmluZWQiLCJta2RNZXNzYWdlIiwiaW5jbHVkZSIsImV4Y2x1ZGUiLCJpc0VtcHR5IiwidHJpbSJdLCJzb3VyY2VSb290IjoiIn0=