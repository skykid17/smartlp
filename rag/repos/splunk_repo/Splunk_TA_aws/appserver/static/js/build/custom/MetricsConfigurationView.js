import{_ as e,d as t,f as n,a as i,h as s,b as a}from"./_rollupPluginBabelHelpers-5e3fb531.js";import{f as l,k as r,g as c,w as d,t as o,h as u,d as m,R as h,b as f,T as _,M as p,i as v,j as N,l as b,n as g,s as y,o as S,c as M}from"./vendor-51b680e2.js";import{T as k}from"./Theme-d82290ef.js";var E="/home/runner/work/splunk-add-on-for-amazon-web-services/splunk-add-on-for-amazon-web-services/build-ui/js/dependencies/DimensionMetricsPanel.js",w=function(){function s(e){i(this,s),this.defaultDimensions=e.defaultDimensions,this.defaultMetrics=e.defaultMetrics,this.defaultStatistics=e.defaultStatistics,this.model=e.model,this.selectedModel=e.selectedModel,this.el=document.querySelector("#dimension-list-section"),this.render=this.render.bind(this),this._handleDimensionsChange=this._handleDimensionsChange.bind(this),this._handleMetricsChange=this._handleMetricsChange.bind(this),this._handleStatisticsChange=this._handleStatisticsChange.bind(this),this._addMetrics=this._addMetrics.bind(this),this._removeMetrics=this._removeMetrics.bind(this),this._resetMetrics=this._resetMetrics.bind(this),this._updateChangeSet=this._updateChangeSet.bind(this)}return e(s,[{key:"_handleDimensionsChange",value:function(e,t,n){var i=t.value,s=this._parseDimension(i);if(s){var a,l,r,c,d,o;null==e||null===(a=e.target)||void 0===a||null===(l=a.parentElement)||void 0===l||l.classList.remove("json-err-state"),null==e||null===(r=e.target)||void 0===r||null===(c=r.parentElement)||void 0===c||c.removeAttribute("data-namespace"),null==e||null===(d=e.target)||void 0===d||d.classList.remove("json-err-state"),this.selectedModel.metric_dimensions_list[n]=s;var u=this.selectedModel.metric_namespace;null===(o=document.querySelector('.namespace-cell[data-namespace="'.concat(u,'"]')))||void 0===o||o.classList.add("namespace-edited-marker"),this.selectedModel.change_set.includes("metric_dimensions_list")||this.selectedModel.change_set.push("metric_dimensions_list")}else{var m,h,f,_,p;null==e||null===(m=e.target)||void 0===m||null===(h=m.parentElement)||void 0===h||h.classList.add("json-err-state"),null==e||null===(f=e.target)||void 0===f||null===(_=f.parentElement)||void 0===_||_.setAttribute("data-namespace",this.selectedModel.metric_namespace),null==e||null===(p=e.target)||void 0===p||p.classList.add("json-err-state")}}},{key:"_handleMetricsChange",value:function(e,t,n){var i,s,a=t.values;this.selectedModel.metric_names_list[n]=this._handleAllOption(a);var l=this.selectedModel.metric_namespace;null===(i=document.querySelector('.namespace-cell[data-namespace="'.concat(l,'"]')))||void 0===i||i.classList.add("namespace-edited-marker"),this.selectedModel.change_set.includes("metric_names_list")||this.selectedModel.change_set.push("metric_names_list"),null===(s=document.querySelector('[data-test="layer-container"] [data-test="layer"]>div'))||void 0===s||s.remove(),this.render()}},{key:"_handleStatisticsChange",value:function(e,t,n){var i,s=t.values;this.selectedModel.statistics_list[n]=s;var a=this.selectedModel.metric_namespace;null===(i=document.querySelector('.namespace-cell[data-namespace="'.concat(a,'"]')))||void 0===i||i.classList.add("namespace-edited-marker")}},{key:"_addMetrics",value:function(){var e;this.selectedModel.metric_dimensions_list.push([]),this.selectedModel.metric_names_list.push([]),this.selectedModel.statistics_list.push([]);var t=this.selectedModel.metric_namespace;null===(e=document.querySelector('.namespace-cell[data-namespace="'.concat(t,'"]')))||void 0===e||e.classList.add("namespace-edited-marker"),this._updateChangeSet(),this.render()}},{key:"_removeMetrics",value:function(e){var t,n=parseInt(e.target.getAttribute("data-index"));this.selectedModel.metric_dimensions_list.splice(n,1),this.selectedModel.metric_names_list.splice(n,1),this.selectedModel.statistics_list.splice(n,1);var i=this.selectedModel.metric_namespace;null===(t=document.querySelector('.namespace-cell[data-namespace="'.concat(i,'"]')))||void 0===t||t.classList.add("namespace-edited-marker"),this._updateChangeSet(),this.render()}},{key:"_resetMetrics",value:function(){var e=this,t=this.selectedModel.metric_namespace,n=l(this.defaultDimensions[t]),i=[],s=[];if(n){var a;n.forEach((function(){i.push([".*"]),s.push(e.defaultStatistics)})),this.selectedModel.metric_dimensions_list=JSON.parse(JSON.stringify(n)),this.selectedModel.metric_names_list=JSON.parse(JSON.stringify(i)),this.selectedModel.statistics_list=JSON.parse(JSON.stringify(s)),this.selectedModel.change_set=[];var r=this.selectedModel.metric_namespace;null===(a=document.querySelector('.namespace-cell[data-namespace="'.concat(r,'"]')))||void 0===a||a.classList.remove("namespace-edited-marker"),this.render()}}},{key:"_updateChangeSet",value:function(){this.selectedModel.change_set.includes("metric_names_list")||this.selectedModel.change_set.push("metric_names_list"),this.selectedModel.change_set.includes("metric_dimensions_list")||this.selectedModel.change_set.push("metric_dimensions_list")}},{key:"_parseDimension",value:function(e){try{for(var t=JSON.parse(e),n=1;n<t.length;n++){var i=r(t[n-1]),s=r(t[n]);if(c(i,s).length>0)return!1}return t}catch(e){}return!1}},{key:"_handleAllOption",value:function(e,t){return e.length>0&&-1!==e.indexOf(".*")&&(e=".*"===e[e.length-1]?[".*"]:d(e,".*")),e}},{key:"render",value:function(){var e=this;if(this.selectedModel.metric_namespace){for(var i=this.selectedModel.metric_dimensions_list,s=this.selectedModel.metric_names_list,a=this.selectedModel.statistics_list,l=this.selectedModel.metric_namespace,c=[],d=function(e){var t=[];u(i[e],(function(e){t=v(t,r(e))})),c.push({dimensionTitle:t.join(", "),dimensionValue:JSON.stringify(i[e])})},N=0;N<i.length;N++)d(N);this.el.innerHTML=o('\x3c!--htmlhint spec-char-escape:false --\x3e\n<!DOCTYPE html>\n\x3c!--\n-- SPDX-FileCopyrightText: 2021 Splunk, Inc. <sales@splunk.com>\n-- SPDX-License-Identifier: LicenseRef-Splunk-8-2021\n--\n--\x3e\n\n<% for (var i = 0; i < dimensionList.length; i++) { %> <% var dimensionItem = dimensionList[i]; %>\n<div class="metrics-row">\n    <div class="metrics-cell metrics-title"><%-dimensionItem.dimensionTitle%></div>\n    <div class="metrics-cell"><span class="dimensions-value" data-index="<%-i%>"></span></div>\n    <div class="metrics-cell"><span class="metrics-value" data-index="<%-i%>"></span></div>\n    <div class="metrics-cell"><span class="statistics-value" data-index="<%-i%>"></span></div>\n    <svg\n        data-index="<%-i%>"\n        class="metrics-remove-button"\n        viewBox="0 0 16 16"\n        width="16"\n        height="16"\n        style="vertical-align: middle"\n    >\n        <path\n            data-index="<%-i%>"\n            d="M12.2024 2.69009C12.5092 2.38325 13.0067 2.38325 13.3136 2.69009C13.6204 2.99693 13.6204 3.49442 13.3136 3.80126L9.11721 7.99762L13.3114 12.1918C13.6206 12.501 13.6206 13.0023 13.3114 13.3114C13.0023 13.6206 12.501 13.6206 12.1918 13.3114L7.99762 9.11721L3.885 13.2298C3.57816 13.5367 3.08067 13.5367 2.77383 13.2298C2.46699 12.923 2.46699 12.4255 2.77383 12.1187L6.88645 8.00604L2.69183 3.81142C2.38267 3.50226 2.38267 3.001 2.69183 2.69183C3.001 2.38267 3.50226 2.38267 3.81142 2.69183L8.00604 6.88646L12.2024 2.69009Z"\n            fill="currentColor"\n            style="vertical-align: middle"\n        ></path>\n    </svg>\n</div>\n<% } %>\n<a id="metrics-add-button">\n    <svg\n        focusable="false"\n        height="9px"\n        width="9px"\n        viewBox="0 0 1500 1500"\n        aria-hidden="false"\n        preserveAspectRatio="xMidYMid"\n        xmlns="http://www.w3.org/2000/svg"\n        style="fill: currentColor"\n    >\n        <path\n            d="M843.943 655.03L1500 656.058V844.97H843.943V1500H655.03V844.97L0 843.942V655.03h655.03V0h188.913"\n        ></path>\n    </svg>\n    Add Another\n</a>\n<a id="metrics-reset-button">\n    <svg\n        focusable="false"\n        height="9px"\n        width="9px"\n        viewBox="0 0 1500 1277"\n        aria-hidden="false"\n        preserveAspectRatio="xMidYMid"\n        xmlns="http://www.w3.org/2000/svg"\n        style="fill: currentColor"\n    >\n        <path\n            d="M185.585 185.585C244.608 126.56 313.28 80.875 391.6 48.525 469.92 16.174 552.213 0 638.48 0c86.265 0 168.557 16.175 246.878 48.524 78.32 32.35 146.992 78.037 206.015 137.06 90.24 94.212 148.128 204.314 173.667 330.307H1500l-306.47 371.17-322.645-373.723h234.96c-20.43-80.59-61.86-153.235-124.29-217.934-51.078-50.51-102.44-86.69-154.086-108.54-51.647-21.852-114.644-32.777-188.99-32.777-73.78 0-136.494 10.925-188.14 32.776-51.645 21.85-102.724 58.03-153.234 108.54-50.51 51.08-86.55 102.44-108.116 154.087-21.567 51.645-32.35 114.642-32.35 188.99 0 74.346 10.64 137.2 31.924 188.563 21.283 51.362 57.463 102.582 108.542 153.66 50.51 50.512 101.447 86.55 152.81 108.117 51.36 21.566 114.216 32.35 188.563 32.35 74.346 0 137.485-10.784 189.414-32.35 51.93-21.567 103.15-57.605 153.66-108.116l109.82 110.67c-59.024 59.023-127.696 104.71-206.016 137.06-78.32 32.35-160.613 48.524-246.88 48.524-86.265 0-168.557-16.175-246.878-48.524-78.32-32.35-146.992-78.037-206.015-137.06-59.024-59.024-104.71-127.696-137.06-206.016C16.174 807.038 0 724.745 0 638.478 0 552.214 16.175 469.922 48.524 391.6c32.35-78.32 78.037-146.992 137.06-206.015z"\n        ></path>\n    </svg>\n    Reset To Default\n</a>\n')({dimensionList:c}),u(document.querySelectorAll(".dimensions-value"),(function(n,i){m.render(h.createElement(f.SplunkThemeProvider,t({},k,{__self:e,__source:{fileName:E,lineNumber:223,columnNumber:11}}),h.createElement(_,{multiline:!0,defaultValue:c[i].dimensionValue,onChange:function(t,n){var s=n.value;return e._handleDimensionsChange(t,{value:s},i)},__self:e,__source:{fileName:E,lineNumber:224,columnNumber:13}})),n)})),u(document.querySelectorAll(".metrics-value"),(function(n,i){var a=e.defaultMetrics[l];a||(a=[]);var r=a.map((function(t){return h.createElement(p.Option,{key:t,label:t,value:t,__self:e,__source:{fileName:E,lineNumber:242,columnNumber:11}})}));r.push(h.createElement(p.Option,{label:"All",value:".*",__self:e,__source:{fileName:E,lineNumber:244,columnNumber:26}})),m.render(h.createElement(f.SplunkThemeProvider,t({},k,{__self:e,__source:{fileName:E,lineNumber:246,columnNumber:11}}),h.createElement(p,{allowNewValues:!0,tabConfirmsNewValue:!0,defaultValues:s[i],onChange:function(t,n){var s=n.values;return e._handleMetricsChange(t,{values:s},i)},__self:e,__source:{fileName:E,lineNumber:247,columnNumber:13}},r)),n)})),u(document.querySelectorAll(".statistics-value"),(function(n,i){var s=e.defaultStatistics;m.render(h.createElement(f.SplunkThemeProvider,t({},k,{__self:e,__source:{fileName:E,lineNumber:265,columnNumber:11}}),h.createElement(p,{allowNewValues:!0,tabConfirmsNewValue:!0,defaultValues:a[i],onChange:function(t,n){var s=n.values;return e._handleStatisticsChange(t,{values:s},i)},__self:e,__source:{fileName:E,lineNumber:266,columnNumber:13}},s.map((function(t){return h.createElement(p.Option,{key:t,label:t,value:t,__self:e,__source:{fileName:E,lineNumber:275,columnNumber:17}})})))),n)}));var b,g=n(document.querySelectorAll(".metrics-remove-button"));try{for(g.s();!(b=g.n()).done;){b.value.addEventListener("click",this._removeMetrics)}}catch(e){g.e(e)}finally{g.f()}document.querySelector("#metrics-reset-button").addEventListener("click",this._resetMetrics),document.querySelector("#metrics-add-button").addEventListener("click",this._addMetrics)}else this.el.empty()}}]),s}(),C="/home/runner/work/splunk-add-on-for-amazon-web-services/splunk-add-on-for-amazon-web-services/build-ui/js/dependencies/NamespaceListPanel.js",L=function(){function s(e){i(this,s),this.el=document.querySelector("#namespace-list-section"),this.model=e.model,this.selectedModel=e.selectedModel,this.defaultNamespaces=e.defaultNamespaces,this.defaultDimensions=e.defaultDimensions,this.defaultMetrics=e.defaultMetrics,this.defaultStatistics=e.defaultStatistics,this.editMarks=[],this.render=this.render.bind(this),this._modifyEditMark=this._modifyEditMark.bind(this),this._selectNamespace=this._selectNamespace.bind(this),this._addSelected=this._addSelected.bind(this),this._addNewNamespace=this._addNewNamespace.bind(this),this._removeNamespace=this._removeNamespace.bind(this),this._renderDimension=this._renderDimension.bind(this),this._modifyEditMark=this._modifyEditMark.bind(this),this._renderEditMarks=this._renderEditMarks.bind(this)}return e(s,[{key:"render",value:function(){var e=this,i=N(this.model,(function(e){return e.metric_namespace}));this.el.innerHTML=o('\x3c!--htmlhint spec-char-escape:false --\x3e\n<!DOCTYPE html>\n\x3c!--\n-- SPDX-FileCopyrightText: 2021 Splunk, Inc. <sales@splunk.com>\n-- SPDX-License-Identifier: LicenseRef-Splunk-8-2021\n--\n--\x3e\n\n<% for (var i = 0; i < namespaces.length; i++) { %>\n<div class="namespace-cell" data-namespace="<%-namespaces[i]%>">\n    <%-namespaces[i]%>\n    <a data-namespace="<%-namespaces[i]%>" class="namespace-remove-button">\n        <svg\n            data-namespace="<%-namespaces[i]%>"\n            viewBox="0 0 16 16"\n            width="16"\n            height="16"\n            style="vertical-align: middle"\n        >\n            <path\n                data-namespace="<%-namespaces[i]%>"\n                d="M12.2024 2.69009C12.5092 2.38325 13.0067 2.38325 13.3136 2.69009C13.6204 2.99693 13.6204 3.49442 13.3136 3.80126L9.11721 7.99762L13.3114 12.1918C13.6206 12.501 13.6206 13.0023 13.3114 13.3114C13.0023 13.6206 12.501 13.6206 12.1918 13.3114L7.99762 9.11721L3.885 13.2298C3.57816 13.5367 3.08067 13.5367 2.77383 13.2298C2.46699 12.923 2.46699 12.4255 2.77383 12.1187L6.88645 8.00604L2.69183 3.81142C2.38267 3.50226 2.38267 3.001 2.69183 2.69183C3.001 2.38267 3.50226 2.38267 3.81142 2.69183L8.00604 6.88646L12.2024 2.69009Z"\n                fill="currentColor"\n            ></path>\n        </svg>\n    </a>\n</div>\n<% } %>\n<div class="namespace-cell" id="namespace-add-cell">\n    <span id="namespace-value"></span>\n    <a id="namespace-add-cancel-button">\n        <svg viewBox="0 0 16 16" width="16" height="16" style="vertical-align: middle">\n            <path\n                d="M12.2024 2.69009C12.5092 2.38325 13.0067 2.38325 13.3136 2.69009C13.6204 2.99693 13.6204 3.49442 13.3136 3.80126L9.11721 7.99762L13.3114 12.1918C13.6206 12.501 13.6206 13.0023 13.3114 13.3114C13.0023 13.6206 12.501 13.6206 12.1918 13.3114L7.99762 9.11721L3.885 13.2298C3.57816 13.5367 3.08067 13.5367 2.77383 13.2298C2.46699 12.923 2.46699 12.4255 2.77383 12.1187L6.88645 8.00604L2.69183 3.81142C2.38267 3.50226 2.38267 3.001 2.69183 2.69183C3.001 2.38267 3.50226 2.38267 3.81142 2.69183L8.00604 6.88646L12.2024 2.69009Z"\n                fill="currentColor"\n            ></path>\n        </svg>\n    </a>\n</div>\n<div id="namespace-add-error"></div>\n<a id="namespace-add-button">\n    <svg\n        focusable="false"\n        height="9px"\n        width="9px"\n        viewBox="0 0 1500 1500"\n        aria-hidden="false"\n        preserveAspectRatio="xMidYMid"\n        xmlns="http://www.w3.org/2000/svg"\n        style="fill: currentColor"\n    >\n        <path\n            d="M843.943 655.03L1500 656.058V844.97H843.943V1500H655.03V844.97L0 843.942V655.03h655.03V0h188.913"\n        ></path>\n    </svg>\n    Add Namespace\n</a>\n')({namespaces:i});var s=c(this.defaultNamespaces,i).sort();m.render(h.createElement(f.SplunkThemeProvider,t({},k,{__self:this,__source:{fileName:C,lineNumber:54,columnNumber:7}}),h.createElement(b,{inline:!0,onBlur:function(t){e._addNewNamespace(t)},onKeyDown:function(t){e._handleKeyPress(t)},__self:this,__source:{fileName:C,lineNumber:55,columnNumber:9}},s.map((function(t){return h.createElement(b.Option,{key:t,value:t,__self:e,__source:{fileName:C,lineNumber:65,columnNumber:13}})})))),document.getElementById("namespace-value"));var a,l=n(document.querySelectorAll(".namespace-cell:not(#namespace-add-cell)"));try{for(l.s();!(a=l.n()).done;){var r=a.value;null==r||r.addEventListener("click",this._selectNamespace)}}catch(e){l.e(e)}finally{l.f()}var d,u=n(document.querySelectorAll(".namespace-remove-button"));try{for(u.s();!(d=u.n()).done;){d.value.addEventListener("click",this._removeNamespace)}}catch(e){u.e(e)}finally{u.f()}document.querySelector("#namespace-add-button").addEventListener("click",this._onClickAddNamespace),document.querySelector("#namespace-add-cancel-button").addEventListener("click",this._onClickCancelNamespace),this._renderEditMarks(),this._addSelected()}},{key:"_onClickAddNamespace",value:function(){var e,t,n=document.querySelector("#namespace-add-cell");n&&(n.style.display="block"),null===(e=document.querySelector("#namespace-value>div>div"))||void 0===e||e.remove(),null===(t=document.querySelector("#namespace-value input"))||void 0===t||t.focus()}},{key:"_onClickCancelNamespace",value:function(){var e=document.querySelector("#namespace-value input");e&&(e.value="",null==e||e.classList.remove("validate-error"));var t=document.querySelector("#namespace-add-cell");t&&(t.style.display="none");var n=document.querySelector("#namespace-add-error");n&&(n.style.display="none")}},{key:"_selectNamespace",value:function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.getAttribute("data-namespace"),i=g(this.model,{metric_namespace:n});i&&(this.selectedModel=i),this._addSelected()}},{key:"_addSelected",value:function(){var e,t;null===(e=document.querySelector(".namespace-cell"))||void 0===e||e.classList.remove("selected");var n=this.selectedModel.metric_namespace;null===(t=document.querySelector('.namespace-cell[data-namespace="'.concat(n,'"]')))||void 0===t||t.classList.add("selected"),this._renderDimension()}},{key:"_addNewNamespace",value:function(e){var t=e.target.value.trim(),n=N(this.model,(function(e){return e.metric_namespace}));if(""===t){var i,s=document.querySelector("#namespace-add-error");s&&(s.textContent="Namespace value cannot be empty.",s.style.display="block"),null===(i=e.currentTarget)||void 0===i||i.classList.add("validate-error")}else if(-1===n.indexOf(t)){var a={};if(-1===this.defaultNamespaces.indexOf(t))a={metric_namespace:t,metric_dimensions_list:[],metric_names_list:[],statistics_list:[],change_set:[]};else{for(var r=[],c=[],d=l(this.defaultDimensions[t]),o=0;o<d.length;o++)r.push([".*"]),c.push(this.defaultStatistics);a={metric_namespace:t,metric_dimensions_list:d,metric_names_list:r,statistics_list:c,change_set:[]}}this.model.push(a),this.selectedModel=a,this._modifyEditMark(),this.editMarks.push(this.selectedModel.metric_namespace),this.render()}else{var u,m=document.querySelector("#namespace-add-error");m&&(m.textContent="This namespace is already existed.",m.style.display="block"),null===(u=e.target)||void 0===u||u.classList.add("validate-error")}}},{key:"_removeNamespace",value:function(e){var t;e.stopPropagation();var n=g(this.model,{metric_namespace:null===(t=e.target)||void 0===t?void 0:t.getAttribute("data-namespace")});if(n){var i=this.model.indexOf(n);i>-1&&this.model.splice(i,1)}this._modifyEditMark(),this.render();var s=this.model.length-1;s>-1&&(this.selectedModel=this.model[s],this._addSelected())}},{key:"_renderDimension",value:function(){new w({model:this.model,selectedModel:this.selectedModel,defaultDimensions:this.defaultDimensions,defaultMetrics:this.defaultMetrics,defaultStatistics:this.defaultStatistics}).render()}},{key:"_handleKeyPress",value:function(e){if(13===e.which){var t=document.querySelector("#namespace-add-error");t&&(t.textContent="Press <TAB> key to add the selected namespace",t.style.display="block")}}},{key:"_modifyEditMark",value:function(){this.editMarks=[];var e,t=n(document.querySelectorAll("div.namespace-edited-marker"));try{for(t.s();!(e=t.n()).done;){var i=e.value;this.editMarks.push(i.getAttribute("data-namespace"))}}catch(e){t.e(e)}finally{t.f()}}},{key:"_renderEditMarks",value:function(){var e,t=n(this.editMarks);try{for(t.s();!(e=t.n()).done;){var i,s=e.value;null===(i=document.querySelector('.namespace-cell[data-namespace="'.concat(s,'"]')))||void 0===i||i.classList.add("namespace-edited-marker")}}catch(e){t.e(e)}finally{t.f()}}}]),s}(),x="/home/runner/work/splunk-add-on-for-amazon-web-services/splunk-add-on-for-amazon-web-services/build-ui/js/components/metrics/AdvncedMatricConfigurationTemplate.jsx",D=function(e){var t=e.handleCancelClick;return h.createElement("div",{id:"advanced-metric-configuration-wrapper",__self:undefined,__source:{fileName:x,lineNumber:16,columnNumber:3}},h.createElement("div",{"data-align-items":"stretch","data-test":"row",className:"ucc-main-div advanced-metric-configuration",style:{padding:"5px 0px",marginBottom:"4px"},__self:undefined,__source:{fileName:x,lineNumber:17,columnNumber:5}},h.createElement("div",{"data-test":"column",className:"ucc-sub-div",style:{flex:"1 1 auto",width:"calc((100% - 88px) * 0.0833333 + 0px)"},__self:undefined,__source:{fileName:x,lineNumber:23,columnNumber:7}},h.createElement("div",{className:"page-subtitle",__self:undefined,__source:{fileName:x,lineNumber:32,columnNumber:9}},"Inputs > Cloudwatch Input > Edit Metrics Configuration"))),h.createElement("div",{"data-align-items":"stretch","data-test":"row",className:"ucc-main-div advanced-metric-configuration",style:{marginTop:"4px",marginBottom:"4px",display:"block"},__self:undefined,__source:{fileName:x,lineNumber:37,columnNumber:5}},h.createElement("div",{"data-test":"column",className:"ucc-sub-div",style:{boxShadow:"rgba(0, 0, 0, 0.2) 0px 4px 8px",padding:"1%",paddingBottom:"0%",flex:"8 8 auto",width:"100%",minWidth:"1180px"},__self:undefined,__source:{fileName:x,lineNumber:43,columnNumber:7}},h.createElement("div",{id:"advanced-submit-error-msg",__self:undefined,__source:{fileName:x,lineNumber:55,columnNumber:9}},h.createElement("svg",{focusable:"false",height:"24px",width:"24px",viewBox:"0 0 1375 1500","aria-hidden":"true",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",style:{verticalAlign:"middle",fill:"#dc4e41"},__self:undefined,__source:{fileName:x,lineNumber:56,columnNumber:11}},h.createElement("path",{d:"M187.5 61.5h1000c103.553 0 187.5 83.947 187.5 187.5v1000c0 103.553-83.947 187.5-187.5 187.5h-1000C83.947 1436.5 0 1352.553 0 1249V249C0 145.447 83.947 61.5 187.5 61.5zm400.79 413.083l32.145 257.167c4.908 39.264 34.086 74.685 69.815 91.187 36.612-16.018 64.87-50.826 69.914-91.187l32.146-257.167C799.18 419.623 759.582 374 703.7 374h-26.8c-55.908 0-95.555 45.033-88.61 100.583zm101.293 644.209c63.283 0 114.584-51.301 114.584-114.584 0-63.282-51.301-114.583-114.584-114.583-63.282 0-114.583 51.3-114.583 114.583s51.3 114.584 114.583 114.584z",__self:undefined,__source:{fileName:x,lineNumber:66,columnNumber:13}})),h.createElement("div",{id:"error-message",style:{display:"inline-block",padding:" 0px 6px",verticalAlign:"middle"},__self:undefined,__source:{fileName:x,lineNumber:68,columnNumber:11}})),h.createElement("table",{className:"table table-chrome advanced-metrics-table",__self:undefined,__source:{fileName:x,lineNumber:77,columnNumber:9}},h.createElement("thead",{className:"table-head",__self:undefined,__source:{fileName:x,lineNumber:78,columnNumber:11}},h.createElement("tr",{__self:undefined,__source:{fileName:x,lineNumber:79,columnNumber:13}},h.createElement("th",{__self:undefined,__source:{fileName:x,lineNumber:80,columnNumber:15}},"Namespace"),h.createElement("th",{className:"no-border",__self:undefined,__source:{fileName:x,lineNumber:81,columnNumber:15}},"Dimension"),h.createElement("th",{className:"no-border",__self:undefined,__source:{fileName:x,lineNumber:82,columnNumber:15}},"Dimension Value",h.createElement("span",{className:"tooltip-icon","data-toggle":"tooltip","data-container":"body",title:"CloudWatch metric dimensions as JSON array or object, with strings as keys and regular expressions as values. Splunk Web automatically populates correctly formatted JSON to collect all metric dimensions in the namespace you have selected",__self:undefined,__source:{fileName:x,lineNumber:84,columnNumber:17}},"?")),h.createElement("th",{className:"no-border",__self:undefined,__source:{fileName:x,lineNumber:93,columnNumber:15}},"Metrics"),h.createElement("th",{className:"no-border",__self:undefined,__source:{fileName:x,lineNumber:94,columnNumber:15}},"Metric Statistics"),h.createElement("th",{className:"no-border",style:{padding:"5px",minWidth:"unset",background:"inherit",width:"0.4%"},__self:undefined,__source:{fileName:x,lineNumber:95,columnNumber:15}}))),h.createElement("tbody",{__self:undefined,__source:{fileName:x,lineNumber:106,columnNumber:11}},h.createElement("tr",{style:{verticalAlign:"top"},__self:undefined,__source:{fileName:x,lineNumber:107,columnNumber:13}},h.createElement("td",{style:{borderRight:"1px solid #bfbfbf"},__self:undefined,__source:{fileName:x,lineNumber:108,columnNumber:15}},h.createElement("div",{className:"list-section",id:"namespace-list-section",__self:undefined,__source:{fileName:x,lineNumber:109,columnNumber:17}})),h.createElement("td",{colSpan:5,__self:undefined,__source:{fileName:x,lineNumber:111,columnNumber:15}},h.createElement("div",{className:"list-section",id:"dimension-list-section",__self:undefined,__source:{fileName:x,lineNumber:112,columnNumber:17}}))))))),h.createElement("div",{"data-align-items":"stretch","data-test":"row",className:"ucc-main-div metrics-configuration-footer advanced-metric-configuration",__self:undefined,__source:{fileName:x,lineNumber:119,columnNumber:5}},h.createElement("button",{"data-test":"button",type:"button",label:"Cancel",id:"metrics-cancel",className:"ucc-cancel-button ucc-base-button","data-inline":"true",onClick:t,__self:undefined,__source:{fileName:x,lineNumber:124,columnNumber:7}},h.createElement("span",{__self:undefined,__source:{fileName:x,lineNumber:133,columnNumber:9}},h.createElement("span",{"data-test":"label",__self:undefined,__source:{fileName:x,lineNumber:134,columnNumber:11}},"Cancel"))),h.createElement("button",{"data-test":"button",type:"button",label:"Save Changes",id:"metrics-save",className:"ucc-save-button ucc-base-button","data-inline":"true",__self:undefined,__source:{fileName:x,lineNumber:137,columnNumber:7}},h.createElement("span",{__self:undefined,__source:{fileName:x,lineNumber:145,columnNumber:9}},h.createElement("span",{"data-test":"label",__self:undefined,__source:{fileName:x,lineNumber:146,columnNumber:11}},"Save Changes")))))},O=function(){function t(e){i(this,t),this.model=e.model,this.defaultDimensions=e.defaultDimensions,this.defaultMetrics=e.defaultMetrics,this.defaultStatistics=e.defaultStatistics,this.defaultNamespaces=e.defaultNamespaces,this.selectedModel=this.model[0],this.render=this.render.bind(this),this._renderNamespaces=this._renderNamespaces.bind(this),this._validateModel=this._validateModel.bind(this)}return e(t,[{key:"render",value:function(){document.querySelectorAll('div[role="main"] > div div [data-test="column-layout"] > div').forEach((function(e){e.style&&(e.style.display="none")}));var e=document.createElement("div");e.id="container-advanced-metrics-configuration",document.querySelector('div[role="main"] > div > div').append(e),m.render(h.createElement(D,{handleCancelClick:this._cancelModifications,__self:this,__source:{fileName:"/home/runner/work/splunk-add-on-for-amazon-web-services/splunk-add-on-for-amazon-web-services/build-ui/js/dependencies/MetricsConfigurationAdvancedView.js",lineNumber:45,columnNumber:7}}),e),this._renderNamespaces()}},{key:"_renderNamespaces",value:function(){this.namespaceListPanel=new L({model:this.model,selectedModel:this.selectedModel,defaultNamespaces:this.defaultNamespaces,defaultDimensions:this.defaultDimensions,defaultMetrics:this.defaultMetrics,defaultStatistics:this.defaultStatistics}),this.namespaceListPanel.render()}},{key:"_cancelModifications",value:function(){var e;null===(e=document.getElementById("advanced-metric-configuration-wrapper"))||void 0===e||e.remove(),document.querySelectorAll('div[role="main"] > div div [data-test="column-layout"] > div').forEach((function(e){null!=e&&e.style&&(e.style.display="flex")}))}},{key:"_validateModel",value:function(){var e,t;if(null===(e=document.querySelector(".namespace-cell[data-namespace]"))||void 0===e||null===(t=e.classList)||void 0===t||t.remove("validate-error"),!this.model.length)return"Metric configurations must have at least one namespace with appropriate metric, dimensions and statstics value. Please check.";var i,s=n(this.model);try{for(s.s();!(i=s.n()).done;){var a=i.value,l=a.metric_namespace,r=document.querySelector(".json-err-state"),c=function(e){var t;null===(t=document.querySelector('.namespace-cell[data-namespace="'.concat(e,'"]')))||void 0===t||t.classList.add("validate-error")};if(r){var d=null==r?void 0:r.getAttribute("data-namespace");return c(d),"The metric dimension value of "+d+" should be a JSON array, of which elements should have same keys. Please check."}if(this._containsEmptyItem(a.metric_dimensions_list))return c(l),'The metric dimension value of "'+a.metric_namespace+'" is empty. Please check.';if(this._containsEmptyItem(a.metric_names_list))return c(l),'The metric name of "'+a.metric_namespace+'" is empty. Please check.';if(this._containsEmptyItem(a.statistics_list))return c(l),'The metric statistics of "'+a.metric_namespace+'" is empty. Please check.'}}catch(e){s.e(e)}finally{s.f()}}},{key:"_containsEmptyItem",value:function(e){return 0===e.length||y(e,(function(e){return S(e,[])||S(e,[""])}))}}]),t}(),q="/home/runner/work/splunk-add-on-for-amazon-web-services/splunk-add-on-for-amazon-web-services/build-ui/js/components/metrics/MetricConfigurationRow.jsx",A=function(e){var t=e.service,n=e.isDimensionModified,i=e.dimensions,s=e.isMetricsModified,a=e.metrics,l=e.handleLoadSelectedNameSpace;return h.createElement("tr",{__self:undefined,__source:{fileName:q,lineNumber:27,columnNumber:3}},h.createElement("td",{__self:undefined,__source:{fileName:q,lineNumber:28,columnNumber:5}},t),h.createElement("td",{__self:undefined,__source:{fileName:q,lineNumber:29,columnNumber:5}},n?h.createElement("a",{class:"link-text configuration-modified-mark",title:i,"data-service":t,onClick:function(){return l(t)},__self:undefined,__source:{fileName:q,lineNumber:31,columnNumber:9}},"Modified"):h.createElement("span",{__self:undefined,__source:{fileName:q,lineNumber:40,columnNumber:9}},i)),h.createElement("td",{__self:undefined,__source:{fileName:q,lineNumber:43,columnNumber:5}},s?h.createElement("a",{class:"link-text configuration-modified-mark",title:a,"data-service":t,onClick:function(){return l(t)},__self:undefined,__source:{fileName:q,lineNumber:45,columnNumber:9}},"Modified"):h.createElement("span",{__self:undefined,__source:{fileName:q,lineNumber:54,columnNumber:9}},a)))},J=function(e){var t=e.count;return h.createElement("tr",{__self:undefined,__source:{fileName:q,lineNumber:61,columnNumber:3}},h.createElement("th",{__self:undefined,__source:{fileName:q,lineNumber:62,columnNumber:5}},"Name Service",h.createElement("span",{class:"metrics-configuration-count",__self:undefined,__source:{fileName:q,lineNumber:64,columnNumber:7}},"(",t,")")),h.createElement("th",{__self:undefined,__source:{fileName:q,lineNumber:66,columnNumber:5}},"Dimensions"),h.createElement("th",{__self:undefined,__source:{fileName:q,lineNumber:67,columnNumber:5}},"Metrics"))},j=function(){function t(e){i(this,t),this.model=e.model,this.defaultDimensions=e.defaultDimensions,this.defaultMetrics=e.defaultMetrics,this.handleLoadSelectedNameSpace=e.handleLoadSelectedNameSpace,this.render=this.render.bind(this)}return e(t,[{key:"render",value:function(){var e,t=this.model.metric_dimensions_list,n=this.model.metric_names_list,i=new Set,s=new Set,a=new Set;return null==n||n.forEach((function(e){return null==e?void 0:e.forEach((function(e){return s.add(e)}))})),null==t||t.forEach((function(e){return null==e?void 0:e.forEach((function(e){var t;return null===(t=Object.keys(e))||void 0===t?void 0:t.forEach((function(e){return i.add(e)}))}))})),null===(e=this.defaultDimensions)||void 0===e||e.forEach((function(e){return null==e?void 0:e.forEach((function(e){var t;return null===(t=Object.keys(e))||void 0===t?void 0:t.forEach((function(e){return a.add(e)}))}))})),h.createElement(A,{service:this.model.metric_namespace,metrics:this._restrictStringLength(s.has(".*")||this.defaultMetrics&&0===s.difference(new Set(this.defaultMetrics)).size?"All":Array.from(s).join(", ")),dimensions:this._restrictStringLength(a.size>0&&0===a.difference(i).size?"All":Array.from(i).join(", ")),isMetricsModified:this.model.change_set.includes("metric_names_list"),isDimensionModified:this.model.change_set.includes("metric_dimensions_list"),handleLoadSelectedNameSpace:this.handleLoadSelectedNameSpace,__self:this,__source:{fileName:"/home/runner/work/splunk-add-on-for-amazon-web-services/splunk-add-on-for-amazon-web-services/build-ui/js/dependencies/MetricsConfigurationRow.js",lineNumber:46,columnNumber:7}})}},{key:"_restrictStringLength",value:function(e){return e.length>50?e.substring(0,48)+"...":e}}]),t}(),T=function(){function t(e,n,s,a,l){var r=this;i(this,t),this.globalConfig=e,this.el=n,this.data=s,this.util=l,this.setValue=a,this.mainModel=[],this.cachedChangeSet=[],this._goAdvancedSetting=this._goAdvancedSetting.bind(this),this._generateViewModel=this._generateViewModel.bind(this),this._updateModifications=this._updateModifications.bind(this),this._loadDefaultSettings=this._loadDefaultSettings.bind(this),this._renderRows=this._renderRows.bind(this),this._updateModel=this._updateModel.bind(this),this._loadSelectedNameSpace=this._loadSelectedNameSpace.bind(this),this.render=this.render.bind(this),this._loadDefaultSettings().then((function(){r._generateViewModel(),r.render(),r._updateModel()}))}return e(t,[{key:"render",value:function(){var e;return this.el.innerHTML=this._generateTemplateMetricTableHTML(this.mainModel.length),this._renderRows(),null===(e=this.el.querySelector("#metrics-configuration-advanced-setting"))||void 0===e||e.addEventListener("click",this._goAdvancedSetting),this}},{key:"_loadSelectedNameSpace",value:function(e){this._goAdvancedSetting(),document.querySelector(".namespace-cell[data-namespace='".concat(e,"']")).click()}},{key:"_loadDefaultSettings",value:function(){var e=this,t=M("splunk_ta_aws/splunk_ta_aws_cloudwatch_default_settings",{app:"Splunk_TA_aws",sharing:"app"});return fetch(t+"?output_mode=json").then((function(e){return e.json()})).then((function(t){var n=t.entry[0].content,i=n.dimensions,s=n.metrics,a=n.statistics,l=n.namespaces,r=JSON.parse(i);for(var c in r){var d=r[c].map((function(e){return[e]}));r[c]=d}e.defaultDimensions=r,e.defaultMetrics=JSON.parse(s),e.defaultStatistics=JSON.parse(a),e.defaultNamespaces=JSON.parse(l)}))}},{key:"_generateViewModel",value:function(){var e=this,t=this.data.value,n=[];if(t){t=JSON.parse(t);var i="",l="",r="",c={};this.util.setState((function(e){var t=a({},e.data);return i=JSON.parse(t.metric_dimensions.value),l=JSON.parse(t.metric_names.value),r=JSON.parse(t.statistics.value),{data:t}}));for(var d=0;d<t.length;d++){var o=t[d],u=JSON.parse(l[d]);if(".*"===u&&(u=[".*"]),void 0===c[o])n.push({metric_namespace:o,metric_dimensions_list:[JSON.parse(i[d])],metric_names_list:[u],statistics_list:[JSON.parse(r[d])],change_set:this.cachedChangeSet[o]||[]}),c[o]=n.length-1;else{var m=n[c[o]];m.metric_dimensions_list.push(JSON.parse(i[d])),m.metric_names_list.push(u),m.statistics_list.push(JSON.parse(r[d]))}}}else n=this.defaultNamespaces.map((function(t){for(var n=[],i=[],a=s(e.defaultDimensions[t]),l=0;l<a.length;l++)n.push([".*"]),i.push(e.defaultStatistics);return{metric_namespace:t,metric_dimensions_list:a,metric_names_list:n,statistics_list:i,change_set:e.cachedChangeSet[t]||[]}}));n.sort((function(e,t){return e.metric_namespace.localeCompare(t.metric_namespace)})),this.mainModel=n}},{key:"_renderRows",value:function(){var e=this,t=this.mainModel.map((function(t){return new j({model:t,defaultDimensions:e.defaultDimensions[t.metric_namespace],defaultMetrics:e.defaultMetrics[t.metric_namespace],handleLoadSelectedNameSpace:e._loadSelectedNameSpace}).render()})),n=document.querySelector("#metrics-configuration-table > tbody");n&&m.render([h.createElement(J,{count:t.length,__self:this,__source:{fileName:"/home/runner/work/splunk-add-on-for-amazon-web-services/splunk-add-on-for-amazon-web-services/build-ui/js/MetricsConfigurationView.js",lineNumber:183,columnNumber:10}})].concat(s(t)),n)}},{key:"_updateModel",value:function(){var e=this,t=[],n=[],i=[],s=[];this.mainModel.forEach((function(a){for(var l=a.metric_namespace,r=a.metric_dimensions_list,c=a.metric_names_list,d=a.statistics_list,o=0;o<r.length;o++)t.push(l),n.push(JSON.stringify(r[o])),1===c[o].length&&".*"===c[o][0]?i.push('".*"'):i.push(JSON.stringify(c[o])),s.push(JSON.stringify(d[o]));e.cachedChangeSet[l]=a.change_set})),this.util.setState((function(e){var l=a({},e.data);return l.metric_namespace.value=JSON.stringify(t),l.metric_dimensions.value=JSON.stringify(n),l.metric_names.value=JSON.stringify(i),l.statistics.value=JSON.stringify(s),{data:l}}))}},{key:"_goAdvancedSetting",value:function(){var e;this.tempModel=JSON.parse(JSON.stringify(this.mainModel)),this.advancedView=new O({model:this.tempModel,defaultDimensions:this.defaultDimensions,defaultMetrics:this.defaultMetrics,defaultStatistics:this.defaultStatistics,defaultNamespaces:Object.keys(this.defaultDimensions)}),this.advancedView.render(),null===(e=document.querySelector("#metrics-save"))||void 0===e||e.addEventListener("click",this._updateModifications)}},{key:"_updateModifications",value:function(){var e=this.advancedView._validateModel();if(e){if(document.querySelector("#error-message")){var t=document.querySelector("#error-message");t&&(t.textContent=e)}var n=document.querySelector("#advanced-submit-error-msg");n&&(n.style.display="block")}else{var i;null===(i=document.getElementById("advanced-metric-configuration-wrapper"))||void 0===i||i.remove(),document.querySelectorAll('div[role="main"] > div div [data-test="column-layout"] > div').forEach((function(e){null!=e&&e.style&&(e.style.display="flex")})),this.mainModel=JSON.parse(JSON.stringify(this.tempModel)),this.render(),this._updateModel()}}},{key:"_generateTemplateMetricTableHTML",value:function(e){return'\n    <div class="metrics-configuration-header">\n    <a href="javascript:;" class="link-text" id="metrics-configuration-advanced-setting">(Edit in advanced mode)</a>\n    </div>\n    <table class="metrics-table-view" id="metrics-configuration-table">\n        <tr>\n            <th>Name Service <span class="metrics-configuration-count">'.concat(e,"</span></th>\n            <th>Dimensions</th>\n            <th>Metrics</th>\n        </tr>\n    </table>")}}]),t}();export{T as default};
//# sourceMappingURL=MetricsConfigurationView.js.map
