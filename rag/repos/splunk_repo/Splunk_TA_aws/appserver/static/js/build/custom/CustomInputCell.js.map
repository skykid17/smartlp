{"version":3,"file":"CustomInputCell.js","sources":["../../../../../../../build-ui/js/CustomInputCell.js"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2021 Splunk, Inc. <sales@splunk.com>\n * SPDX-License-Identifier: LicenseRef-Splunk-8-2021\n *\n */\n\nimport { getMockService, detectSource } from './configs/SourceInput'\nimport { getComponent } from './utils/GlobalConfigUtil'\nimport '../stylesheets/CustomInputCell.css'\n\nclass CustomInputCell {\n  /**\n     * Custom Row Cell\n     * @constructor\n     * @param {Object} globalConfig - Global configuration.\n     * @param {string} serviceName - Input service name.\n     * @param {element} el - The element of the custom cell.\n     * @param {Object} row - custom row object.\n     * @param {string} field - The cell field name.\n     */\n  constructor (globalConfig, serviceName, el, row, field) {\n    this.globalConfig = globalConfig\n    this.serviceName = serviceName\n    this.el = el\n    this.row = row\n    this.field = field\n  }\n\n  render () {\n    let html = ''\n    if (this.field === 'name') {\n      html = this.row.name\n      let conflict = {}\n      if ('_conflict_fields' in this.row) {\n        conflict = JSON.parse(this.row._conflict_fields)\n      }\n      if (Object.keys(conflict).length > 0) {\n        this.context = getComponent(this.globalConfig, this.serviceName)\n        const entity = this.context.entity\n        let msg = 'The following fields have conflict. '\n        msg += Object.keys(conflict)\n          .map((key) => {\n            const globalConfigField = entity.find((el) => el.field === key)\n            const label = (globalConfigField) ? globalConfigField.label : key\n            return `${label} = [${conflict[key].join(', ')}]`\n          })\n          .join(', ')\n        msg += '. Please resolve the conflict in conf file first.'\n        html = `<a title=\"${msg}\"><svg class=\"conflict-alert\" focusable=\"false\" viewBox=\"0 0 1375 1500\"><path d=\"M187.5 61.5h1000c103.553 0 187.5 83.947 187.5 187.5v1000c0 103.553-83.947 187.5-187.5 187.5h-1000C83.947 1436.5 0 1352.553 0 1249V249C0 145.447 83.947 61.5 187.5 61.5zm400.79 413.083l32.145 257.167c4.908 39.264 34.086 74.685 69.815 91.187 36.612-16.018 64.87-50.826 69.914-91.187l32.146-257.167C799.18 419.623 759.582 374 703.7 374h-26.8c-55.908 0-95.555 45.033-88.61 100.583zm101.293 644.209c63.283 0 114.584-51.301 114.584-114.584 0-63.282-51.301-114.583-114.584-114.583-63.282 0-114.583 51.3-114.583 114.583s51.3 114.584 114.583 114.584z\" style=\"\"></path></svg></a>${html}`\n      }\n    } else if (this.field === 'aws_account') {\n      if ('aws_account' in this.row) {\n        html = this.row.aws_account\n      } else {\n        html = this.row.account\n      }\n    } else if (this.field === 'source') {\n      const source = detectSource(this.row, this.serviceName)\n      const mockService = getMockService()\n      if (source in mockService) {\n        html = mockService[source]\n      } else {\n        html = getComponent(this.globalConfig, source).title\n      }\n      this.row.source = html\n    }\n\n    this.el.innerHTML = html\n    return this\n  }\n}\n\nexport default CustomInputCell\n"],"names":["CustomInputCell","globalConfig","serviceName","el","row","field","html","this","name","conflict","JSON","parse","_conflict_fields","Object","keys","length","context","getComponent","entity","msg","map","key","globalConfigField","find","label","join","aws_account","account","source","detectSource","mockService","getMockService","title","innerHTML"],"mappings":"+KAUMA,wBAUSC,EAAcC,EAAaC,EAAIC,EAAKC,kBAC1CJ,aAAeA,OACfC,YAAcA,OACdC,GAAKA,OACLC,IAAMA,OACNC,MAAQA,kCAGf,eACMC,EAAO,MACQ,SAAfC,KAAKF,MAAkB,CACzBC,EAAOC,KAAKH,IAAII,SACZC,EAAW,MACX,qBAAsBF,KAAKH,MAC7BK,EAAWC,KAAKC,MAAMJ,KAAKH,IAAIQ,mBAE7BC,OAAOC,KAAKL,GAAUM,OAAS,EAAG,MAC/BC,QAAUC,EAAaV,KAAKN,aAAcM,KAAKL,iBAC9CgB,EAASX,KAAKS,QAAQE,OACxBC,EAAM,uCACVA,GAAON,OAAOC,KAAKL,GAChBW,KAAI,SAACC,OACEC,EAAoBJ,EAAOK,MAAK,SAACpB,UAAOA,EAAGE,QAAUgB,KACrDG,EAASF,EAAqBA,EAAkBE,MAAQH,kBACpDG,iBAAYf,EAASY,GAAKI,KAAK,cAE1CA,KAAK,MAERnB,sBADAa,GAAO,wsBAC4pBb,SAEhqB,GAAmB,gBAAfC,KAAKF,MAEZC,EADE,gBAAiBC,KAAKH,IACjBG,KAAKH,IAAIsB,YAETnB,KAAKH,IAAIuB,aAEb,GAAmB,WAAfpB,KAAKF,MAAoB,KAC5BuB,EAASC,EAAatB,KAAKH,IAAKG,KAAKL,aACrC4B,EAAcC,IAElBzB,EADEsB,KAAUE,EACLA,EAAYF,GAEZX,EAAaV,KAAKN,aAAc2B,GAAQI,WAE5C5B,IAAIwB,OAAStB,cAGfH,GAAG8B,UAAY3B,EACbC"}